// Define the pin connections
int soilMoisturePin = A2;
int relayControlPin = D0;

// Define the dryness threshold for your soil. You may need to adjust this based on your sensor and soil.
int dryThreshold = 700;

void setup() {
  // Start serial communication
  Serial.begin(9600);

  // Set up the control pin as output
  pinMode(relayControlPin, OUTPUT);

  // Start with the pump off
  digitalWrite(relayControlPin, HIGH); // for active low relay, pump off means HIGH state
}

void loop() {
  // Read the soil moisture level
  int soilMoisture = analogRead(soilMoisturePin);

  // Print the soil moisture level to the serial monitor
  Serial.println(soilMoisture);

  // If the soil is too dry
  if (soilMoisture > dryThreshold) {
    // Turn on the pump
    digitalWrite(relayControlPin, LOW); // for active low relay, pump on means LOW state
    delay(1000 * 10); // keep the pump on for 10 seconds
    digitalWrite(relayControlPin, HIGH); // turn off the pump
  }

  // Delay for a bit before checking again
  delay(1000);
}
